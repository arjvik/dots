#!/bin/bash

[[ "$1" == "--no-kill" ]] || i3-msg '[class="XAVA"]' kill

XDG_CONFIG_HOME=~/.config xava &

until i3-msg -t subscribe '[ "window" ]' |
	  jq -e '.container.window_properties.class == "XAVA"';
	do :; done

sleep 1

i3-msg '[class="XAVA"]' floating enable, \
						sticky enable, \
						resize set width 1920, \
						resize set height 50, \
						move to absolute position $(xrandr | grep -q "DP-2 connected" \
													&& echo "1920px" || echo "0px") 1030px, \
						border none
